<main>
  <%= form_tag send_notifications_app_path(@app) do %>

    <section class="card">
        <div class="card-header">
            Settings
        </div>
        <div class="card-block">
            <div class=" form-group">
                <%= label_tag 'notification[firebase_server_key]', "Firebase Server key:" %><br/>
                <%= text_field_tag "notification[firebase_server_key]", @notification.try(:auth_key) || "", :class => "form-control", :readonly => @notification.try(:auth_key) %>
            </div>
        </div>
    </section>

    <section class="card">
      <div class="card-header">
        Notification
      </div>
      <div class="card-block">
        <div class=" form-group">
          <%= label_tag 'notification[url]', "URL", :class => "form-control-label" %><br/>
          <%= url_field_tag 'notification[url]', '', :class => "form-control" %>
        </div>

        <div class=" form-group">
          <%= label_tag 'notification[title]', "Title", :class => "form-control-label" %><br/>
          <%= text_field_tag 'notification[title]', '', :class => "form-control" %>
        </div>

        <div class=" form-group">
          <%= label_tag 'notification[message]', "Message", :class => "form-control-label" %><br/>
          <%= text_field_tag 'notification[message]', '', :class => "form-control" %>
        </div>

        <div class=" form-group">
          <%= label_tag 'notification[ids]', "Devices", :class => "form-control-label" %><br/>
          <%= select('notification', 'ids', @app.devices.pluck(:token, :token), { include_blank: 'Send to all', selected: true }, :multiple => true, :size => 10, :limit => 1000, :class => "form-control") %>
        </div>
      </div>
      <div class="card-footer text-muted">
        <%= submit_tag "Send", method: :post, :class => "btn btn-success" %>
      </div>
    </section>
  <% end %>
</main>
